var IMAGEUpload = function(a,b,c,d,e) {
	this.xhr = null;
	
	this.uploadFile = function() {
		var fd = new FormData();
		fd.append("local_file", document.getElementById(b).files[0]);

		this.xhr = new XMLHttpRequest();
		this.xhr.upload.addEventListener("progress", this.uploadProgress, false);
		this.xhr.addEventListener("load", this.uploadComplete, false);
		this.xhr.addEventListener("error", this.uploadFailed, false);
		this.xhr.addEventListener("abort", this.uploadCanceled, false);
		this.xhr.open("POST", a);
		this.xhr.send(fd);
	};
	
	this.uploadProgress = function(evt) {
	};
	
	this.uploadComplete = function(evt) {
		var re = /f\d{23}/g;
		re.exec(evt.target.responseText).forEach(function(ele) {
			alert("上传文件成功，请继续上传。")
			$("#"+d).attr("src", c + ele);
			e.fid = ele;
			localStorage.setItem("fid",JSON.stringify(e));
		});
	};

	this.uploadFailed = function(evt) {
	};

	this.uploadCanceled = function(evt) {
	};
};

ImageMember = function(a) {
	imgs[a]= JSON.parse(localStorage.getItem("fid")).fid;
	return imgs;
}